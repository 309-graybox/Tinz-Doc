---
tags:
  - camera
  - shading
  - mechanics
---
# Описание
___
Представляет собой **шейдерный эффект**, который делает объекты частично или полностью прозрачными в зависимости от их положения в мировом пространстве относительно камеры.

Основное назначение — устранить ситуации, когда камера заходит внутрь геометрии или крупные объекты перекрывают обзор персонажа. Вместо того чтобы позволить камере застрять или дёргаться, система динамически скрывает меши, сохраняя читаемость сцены и комфорт управления.

Параметры описаны [[World Space masking (params)|тут]].
## Варианты реализации
---
### 1. **Partial Masking (Маскирование части объекта)**

Использует **World Position Offset** и **Depth Fade** (или аналогичные механизмы) для постепенного перехода прозрачности в зависимости от расстояния до камеры.  
Применяется, когда нужно «срезать» часть объекта вблизи камеры — например, листву, стены или крупные декорации.

**Плюсы:**

- Сохраняется визуальная целостность окружения;

- Эффект выглядит естественно, особенно при использовании мягкого градиента прозрачности.


**Минусы:**

- Работает только при достаточно плотной сетке модели;

- Может вызывать артефакты на объектах с альфа-тестом.

Реализация в игре Baldur's Gate 3:
<iframe id="ytplayer" type="text/html" width="720" height="405"
src="https://www.youtube.com/embed/?autoplay=1&enablejsapi=1&loop=1&playlist=Pq9kvoOEK5c&controls=0"
frameborder="0" allowfullscreen></iframe>

### 2. **Full Dither Transparency (Полное исчезновение объекта)**

Вместо частичного маскирования весь объект становится прозрачным с помощью **dithering-шейдера**.  
Прозрачность вычисляется на основе позиции камеры и пересечения луча обзора с объектом.

**Плюсы:**

- Подходит для небольших объектов;

- Простая и быстрая реализация на стороне материалов.


**Минусы:**

- Не работает с прозрачными материалами (возможны конфликты по depth-sorting);

- При слишком крупном паттерне dithering может выглядеть «зернисто».

Реализация в игре Baldur's Gate 3:
<iframe id="ytplayer" type="text/html" width="720" height="405"
src="https://www.youtube.com/embed/?autoplay=1&enablejsapi=1&loop=1&playlist=Zm-AfqVqjdA&controls=0"
frameborder="0" allowfullscreen></iframe>
## Использование
---

- Активируется, когда камера пересекает коллизию или приближается к объекту ближе заданного порога;

- Эффект должен обновляться каждый кадр на основании позиции камеры и цели (персонажа);

- Может применяться выборочно — только к объектам, помеченным определённым **Masking Tag** или **Material Parameter**.
# См. Также
---
- [Статья на Хабре](https://habr.com/ru/articles/829804/) — пример реализации `Partial Masking` на Unreal Engine.
- [Видос с твитера](https://twitter.com/i/status/1939781975625093123) - Еще один пример на Unreal

- [[World Space masking (params)]]